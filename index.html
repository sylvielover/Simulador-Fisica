<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Simulador de fisica para estudiantes de universidad">
    <meta name="author" content="Keiner Elias Beltran Vergara">
    <title>Simulador Fisica</title>

    <link rel="stylesheet" href="Css/style.css">

</head>



<body>
    <div class="container">
        <div class="header">
            <h1>‚öΩ Simulador Interactivo del Efecto Magnus</h1>
            <p>Ajusta los par√°metros y observa c√≥mo la rotaci√≥n curva la trayectoria del bal√≥n</p>
        </div>

        <div class="main-content">
            <div class="controls">
                <h2 style="color: #1a237e; margin-bottom: 20px; font-size: 20px;">üéÆ Controles</h2>
                
                <div class="control-group">
                    <label>Velocidad Inicial (m/s)</label>
                    <input type="range" id="velocidad" min="10" max="40" value="25" step="1">
                    <div class="value-display">
                        <span>10 m/s</span>
                        <span class="current-value" id="velocidadValue">25 m/s</span>
                        <span>40 m/s</span>
                    </div>
                </div>

                <div class="control-group">
                    <label>√Ångulo de Lanzamiento (¬∞)</label>
                    <input type="range" id="angulo" min="5" max="45" value="20" step="1">
                    <div class="value-display">
                        <span>5¬∞</span>
                        <span class="current-value" id="anguloValue">20¬∞</span>
                        <span>45¬∞</span>
                    </div>
                </div>

                <div class="control-group">
                    <label>Rotaci√≥n del Bal√≥n (RPM)</label>
                    <input type="range" id="rotacion" min="0" max="1200" value="600" step="50">
                    <div class="value-display">
                        <span>0 RPM</span>
                        <span class="current-value" id="rotacionValue">600 RPM</span>
                        <span>1200 RPM</span>
                    </div>
                </div>

                <div class="buttons">
                    <button class="btn btn-primary" onclick="simular()">‚ñ∂Ô∏è Simular</button>
                    <button class="btn btn-secondary" onclick="reset()">üîÑ Reset</button>
                </div>

                <div class="presets">
                    <h3>üéØ Casos Preconfigurados</h3>
                    <div class="preset-buttons">
                        <button class="preset-btn" onclick="cargarPreset('basico')">
                            <strong>Tiro B√°sico</strong><br>
                            <small>v=20 m/s, Œ∏=15¬∞, œâ=0 RPM</small>
                        </button>
                        <button class="preset-btn" onclick="cargarPreset('medio')">
                            <strong>Tiro con Efecto</strong><br>
                            <small>v=25 m/s, Œ∏=20¬∞, œâ=600 RPM</small>
                        </button>
                        <button class="preset-btn" onclick="cargarPreset('roberto')">
                            <strong>Roberto Carlos 1997</strong><br>
                            <small>v=35 m/s, Œ∏=18¬∞, œâ=900 RPM</small>
                        </button>
                    </div>
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff6b6b;"></div>
                        <span>Trayectoria</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4ecdc4;"></div>
                        <span>Fuerza Magnus</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffe66d;"></div>
                        <span>Bal√≥n</span>
                    </div>
                </div>
            </div>

            <div class="visualization">
                <div class="canvas-wrapper">
                    <div class="canvas-container">
                        <h3>Vista Lateral (Altura vs Distancia)</h3>
                        <canvas id="canvasLateral"></canvas>
                    </div>
                    <div class="canvas-container">
                        <h3>Vista Superior (Desviaci√≥n Lateral)</h3>
                        <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 5px;">
                            ‚ö†Ô∏è Escala vertical exagerada para mejor visualizaci√≥n
                        </p>
                        <canvas id="canvasSuperior"></canvas>
                    </div>
                </div>
                
                <div class="results">
                    <div class="result-card">
                        <div class="label">Desviaci√≥n Lateral</div>
                        <div class="value" id="desviacion">0.00<span class="unit">m</span></div>
                    </div>
                    <div class="result-card">
                        <div class="label">Distancia Total</div>
                        <div class="value" id="distancia">0.00<span class="unit">m</span></div>
                    </div>
                    <div class="result-card">
                        <div class="label">Tiempo de Vuelo</div>
                        <div class="value" id="tiempo">0.00<span class="unit">s</span></div>
                    </div>
                    <div class="result-card">
                        <div class="label">Altura M√°xima</div>
                        <div class="value" id="altura">0.00<span class="unit">m</span></div>
                    </div>
                    <div class="result-card">
                        <div class="label">Fuerza Magnus</div>
                        <div class="value" id="fuerza">0.00<span class="unit">N</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvasLateral = document.getElementById('canvasLateral');
        const ctxLateral = canvasLateral.getContext('2d');
        const canvasSuperior = document.getElementById('canvasSuperior');
        const ctxSuperior = canvasSuperior.getContext('2d');
        
        // Ajustar tama√±o de los canvas
        function resizeCanvas() {
            canvasLateral.width = canvasLateral.offsetWidth;
            canvasLateral.height = canvasLateral.offsetHeight;
            canvasSuperior.width = canvasSuperior.offsetWidth;
            canvasSuperior.height = canvasSuperior.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Constantes f√≠sicas
        const g = 9.81;
        const rho = 1.225;
        const m = 0.43;
        const r = 0.11;
        const A = Math.PI * r * r;
        const Cd = 0.25;

        let animationId = null;
        let trayectoria = [];

        // Actualizar valores mostrados
        document.getElementById('velocidad').addEventListener('input', (e) => {
            document.getElementById('velocidadValue').textContent = e.target.value + ' m/s';
        });
        document.getElementById('angulo').addEventListener('input', (e) => {
            document.getElementById('anguloValue').textContent = e.target.value + '¬∞';
        });
        document.getElementById('rotacion').addEventListener('input', (e) => {
            document.getElementById('rotacionValue').textContent = e.target.value + ' RPM';
        });

        function calcularTrayectoria(v0, angulo, rpm) {
            const omega = rpm * 2 * Math.PI / 60; // rad/s
            const rad = angulo * Math.PI / 180;
            
            // M√©todo simplificado basado en la tabla te√≥rica
            // Desviaci√≥n = 0.004 * RPM (aproximaci√≥n lineal de la tabla)
            const desviacionTeorica = 0.004 * rpm;
            
            // Calcular trayectoria parab√≥lica est√°ndar
            let vx = v0 * Math.cos(rad);
            let vy = v0 * Math.sin(rad);
            let x = 0, y = 0.1;
            let t = 0;
            const dt = 0.01;
            
            const puntos = [];
            let maxAltura = 0;
            
            // Calcular fuerza Magnus te√≥rica
            const CL = (4 * Math.PI * omega * r) / v0;
            const fuerzaMagnusMax = 0.5 * CL * rho * A * v0 * v0;
            
            while (y >= 0 && x < 100 && t < 10) {
                // Desviaci√≥n lateral con curva cuadr√°tica (m√°s realista)
                const progreso = x / (vx * (2 * vy / g)); // Fracci√≥n del vuelo completada
                const z = desviacionTeorica * Math.pow(progreso, 1.5); // Curva m√°s pronunciada al final
                
                puntos.push({ x, y, z, t });
                
                const v = Math.sqrt(vx * vx + vy * vy);
                
                // Fuerza de arrastre
                const Fd = 0.5 * Cd * rho * A * v * v;
                
                // Aceleraciones
                const ax = -(Fd / m) * (vx / v);
                const ay = -g - (Fd / m) * (vy / v);
                
                // Actualizar velocidades
                vx += ax * dt;
                vy += ay * dt;
                
                // Actualizar posiciones
                x += vx * dt;
                y += vy * dt;
                
                maxAltura = Math.max(maxAltura, y);
                t += dt;
            }
            
            return {
                puntos,
                desviacion: desviacionTeorica,
                distancia: x,
                tiempo: t,
                altura: maxAltura,
                fuerza: fuerzaMagnusMax
            };
        }

        function dibujarVistaLateral() {
            const canvas = canvasLateral;
            const ctx = ctxLateral;
            
            // Fondo
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87ceeb');
            gradient.addColorStop(0.6, '#a8e6cf');
            gradient.addColorStop(1, '#7cb342');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // L√≠nea del suelo
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, canvas.height * 0.85);
            ctx.lineTo(canvas.width, canvas.height * 0.85);
            ctx.stroke();
            
            // Porter√≠a
            const porteriaX = canvas.width * 0.9;
            const sueloY = canvas.height * 0.85;
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(porteriaX, sueloY);
            ctx.lineTo(porteriaX, sueloY - 60);
            ctx.stroke();
        }

        function dibujarVistaSuperior() {
            const canvas = canvasSuperior;
            const ctx = ctxSuperior;
            
            // Fondo (campo visto desde arriba)
            ctx.fillStyle = '#7cb342';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // L√≠neas del campo
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i < canvas.height; i += 40) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }
            
            // L√≠nea central
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, canvas.height / 2);
            ctx.lineTo(canvas.width, canvas.height / 2);
            ctx.stroke();
            
            // Porter√≠a (vista desde arriba)
            const porteriaX = canvas.width * 0.9;
            const centroY = canvas.height / 2;
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 4;
            ctx.fillStyle = 'rgba(200, 200, 200, 0.3)';
            ctx.fillRect(porteriaX - 5, centroY - 30, 10, 60);
            ctx.strokeRect(porteriaX - 5, centroY - 30, 10, 60);
        }

        function simular() {
            if (animationId) cancelAnimationFrame(animationId);
            
            const v0 = parseFloat(document.getElementById('velocidad').value);
            const angulo = parseFloat(document.getElementById('angulo').value);
            const rpm = parseFloat(document.getElementById('rotacion').value);
            
            const resultado = calcularTrayectoria(v0, angulo, rpm);
            trayectoria = resultado.puntos;
            
            // Actualizar resultados
            document.getElementById('desviacion').innerHTML = resultado.desviacion.toFixed(2) + '<span class="unit">m</span>';
            document.getElementById('distancia').innerHTML = resultado.distancia.toFixed(2) + '<span class="unit">m</span>';
            document.getElementById('tiempo').innerHTML = resultado.tiempo.toFixed(2) + '<span class="unit">s</span>';
            document.getElementById('altura').innerHTML = resultado.altura.toFixed(2) + '<span class="unit">m</span>';
            document.getElementById('fuerza').innerHTML = resultado.fuerza.toFixed(2) + '<span class="unit">N</span>';
            
            // Animar
            let frame = 0;
            function animar() {
                // VISTA LATERAL
                dibujarVistaLateral();
                const escalaX_L = canvasLateral.width * 0.85 / Math.max(...trayectoria.map(p => p.x));
                const escalaY_L = canvasLateral.height * 0.7 / Math.max(...trayectoria.map(p => p.y));
                const offsetY_L = canvasLateral.height * 0.85;
                
                // Trayectoria lateral
                ctxLateral.strokeStyle = 'rgba(255, 107, 107, 0.4)';
                ctxLateral.lineWidth = 3;
                ctxLateral.beginPath();
                for (let i = 0; i < trayectoria.length; i++) {
                    const px = trayectoria[i].x * escalaX_L + 20;
                    const py = offsetY_L - trayectoria[i].y * escalaY_L;
                    if (i === 0) ctxLateral.moveTo(px, py);
                    else ctxLateral.lineTo(px, py);
                }
                ctxLateral.stroke();
                
                // VISTA SUPERIOR (con escala exagerada en Z para visualizaci√≥n)
                dibujarVistaSuperior();
                const escalaX_S = canvasSuperior.width * 0.85 / Math.max(...trayectoria.map(p => p.x));
                const maxZ = Math.max(...trayectoria.map(p => Math.abs(p.z))) || 1;
                const escalaZ_S = (canvasSuperior.height * 0.8) / maxZ; // Exagerar 2x la escala Z
                const centroY_S = canvasSuperior.height / 2;
                
                // Trayectoria superior (muestra desviaci√≥n lateral)
                ctxSuperior.strokeStyle = 'rgba(255, 107, 107, 0.4)';
                ctxSuperior.lineWidth = 3;
                ctxSuperior.beginPath();
                for (let i = 0; i < trayectoria.length; i++) {
                    const px = trayectoria[i].x * escalaX_S + 20;
                    const py = centroY_S - trayectoria[i].z * escalaZ_S;
                    if (i === 0) ctxSuperior.moveTo(px, py);
                    else ctxSuperior.lineTo(px, py);
                }
                ctxSuperior.stroke();
                
                if (frame < trayectoria.length) {
                    // Trayectoria animada lateral
                    ctxLateral.strokeStyle = '#ff6b6b';
                    ctxLateral.lineWidth = 4;
                    ctxLateral.beginPath();
                    for (let i = 0; i <= frame; i++) {
                        const px = trayectoria[i].x * escalaX_L + 20;
                        const py = offsetY_L - trayectoria[i].y * escalaY_L;
                        if (i === 0) ctxLateral.moveTo(px, py);
                        else ctxLateral.lineTo(px, py);
                    }
                    ctxLateral.stroke();
                    
                    // Bal√≥n lateral
                    const punto = trayectoria[frame];
                    const bx_L = punto.x * escalaX_L + 20;
                    const by_L = offsetY_L - punto.y * escalaY_L;
                    
                    ctxLateral.fillStyle = '#ffe66d';
                    ctxLateral.strokeStyle = '#333';
                    ctxLateral.lineWidth = 2;
                    ctxLateral.beginPath();
                    ctxLateral.arc(bx_L, by_L, 10, 0, Math.PI * 2);
                    ctxLateral.fill();
                    ctxLateral.stroke();
                    
                    // Trayectoria animada superior
                    ctxSuperior.strokeStyle = '#ff6b6b';
                    ctxSuperior.lineWidth = 4;
                    ctxSuperior.beginPath();
                    for (let i = 0; i <= frame; i++) {
                        const px = trayectoria[i].x * escalaX_S + 20;
                        const py = centroY_S - trayectoria[i].z * escalaZ_S;
                        if (i === 0) ctxSuperior.moveTo(px, py);
                        else ctxSuperior.lineTo(px, py);
                    }
                    ctxSuperior.stroke();
                    
                    // Bal√≥n superior
                    const bx_S = punto.x * escalaX_S + 20;
                    const by_S = centroY_S - punto.z * escalaZ_S;
                    
                    ctxSuperior.fillStyle = '#ffe66d';
                    ctxSuperior.strokeStyle = '#333';
                    ctxSuperior.lineWidth = 2;
                    ctxSuperior.beginPath();
                    ctxSuperior.arc(bx_S, by_S, 10, 0, Math.PI * 2);
                    ctxSuperior.fill();
                    ctxSuperior.stroke();
                    
                    // Vector de fuerza Magnus (vista superior)
                    if (rpm > 0) {
                        ctxSuperior.strokeStyle = '#4ecdc4';
                        ctxSuperior.lineWidth = 3;
                        ctxSuperior.beginPath();
                        ctxSuperior.moveTo(bx_S, by_S);
                        ctxSuperior.lineTo(bx_S, by_S - 25);
                        ctxSuperior.stroke();
                        
                        // Flecha
                        ctxSuperior.fillStyle = '#4ecdc4';
                        ctxSuperior.beginPath();
                        ctxSuperior.moveTo(bx_S, by_S - 25);
                        ctxSuperior.lineTo(bx_S - 5, by_S - 20);
                        ctxSuperior.lineTo(bx_S + 5, by_S - 20);
                        ctxSuperior.closePath();
                        ctxSuperior.fill();
                    }
                    
                    frame += 2;
                    animationId = requestAnimationFrame(animar);
                }
            }
            
            animar();
        }

        function reset() {
            if (animationId) cancelAnimationFrame(animationId);
            dibujarVistaLateral();
            dibujarVistaSuperior();
            trayectoria = [];
            
            document.getElementById('desviacion').innerHTML = '0.00<span class="unit">m</span>';
            document.getElementById('distancia').innerHTML = '0.00<span class="unit">m</span>';
            document.getElementById('tiempo').innerHTML = '0.00<span class="unit">s</span>';
            document.getElementById('altura').innerHTML = '0.00<span class="unit">m</span>';
            document.getElementById('fuerza').innerHTML = '0.00<span class="unit">N</span>';
        }

        function cargarPreset(tipo) {
            if (tipo === 'basico') {
                document.getElementById('velocidad').value = 20;
                document.getElementById('angulo').value = 15;
                document.getElementById('rotacion').value = 0;
            } else if (tipo === 'medio') {
                document.getElementById('velocidad').value = 25;
                document.getElementById('angulo').value = 20;
                document.getElementById('rotacion').value = 600;
            } else if (tipo === 'roberto') {
                document.getElementById('velocidad').value = 35;
                document.getElementById('angulo').value = 18;
                document.getElementById('rotacion').value = 900;
            }
            
            document.getElementById('velocidadValue').textContent = document.getElementById('velocidad').value + ' m/s';
            document.getElementById('anguloValue').textContent = document.getElementById('angulo').value + '¬∞';
            document.getElementById('rotacionValue').textContent = document.getElementById('rotacion').value + ' RPM';
            
            simular();
        }

        // Inicializar
        dibujarVistaLateral();
        dibujarVistaSuperior();
    </script>
</body>
</html>